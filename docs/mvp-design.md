# TOEIC Part7 ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚° - MVPè¨­è¨ˆæ›¸

## 1. MVPæ¦‚è¦

### 1.1 ç›®çš„
æœ€å°é™ã®æ©Ÿèƒ½ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤ã‚’æ¤œè¨¼ã—ã€æ—©æœŸã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å¾—ã‚‹ã€‚

### 1.2 MVPã‚¹ã‚³ãƒ¼ãƒ—
| å«ã‚ã‚‹ | å«ã‚ãªã„ï¼ˆPhase 2ä»¥é™ï¼‰ |
|--------|------------------------|
| ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼ˆç™»éŒ²/ãƒ­ã‚°ã‚¤ãƒ³ï¼‰ | AIå•é¡Œç”Ÿæˆ |
| é•·æ–‡èª­è§£å•é¡Œã®è¡¨ç¤ºãƒ»è§£ç­” | å˜èªå­¦ç¿’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« |
| åŸºæœ¬çš„ãªæ­£ç­”ç‡è¡¨ç¤º | æ–‡æ³•å­¦ç¿’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« |
| ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | æ¨¡è©¦æ©Ÿèƒ½ |
| ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ | PWA/ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ |

### 1.3 ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼
- TOEIC 600-800ç‚¹ã®ä¸­ä¸Šç´šè€…
- Part7ã®æ­£ç­”ç‡å‘ä¸Šã‚’ç›®æŒ‡ã™å­¦ç¿’è€…

---

## 2. æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Frontend                       â”‚
â”‚         Next.js 14 (App Router) + TypeScript    â”‚
â”‚              Tailwind CSS + shadcn/ui           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Backend                        â”‚
â”‚            Next.js API Routes (RSC)             â”‚
â”‚              Server Actions                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Database                       â”‚
â”‚     Supabase (PostgreSQL + Auth + Storage)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ
```
toeic_part7/
â”œâ”€â”€ docs/                          # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ requirements.md
â”‚   â””â”€â”€ mvp-design.md
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                       # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (auth)/               # èªè¨¼ã‚°ãƒ«ãƒ¼ãƒ—
â”‚   â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ register/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ (main)/               # ãƒ¡ã‚¤ãƒ³ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆèªè¨¼å¿…é ˆï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ reading/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx      # å•é¡Œä¸€è¦§
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx  # å•é¡Œè©³ç´°ãƒ»è§£ç­”
â”‚   â”‚   â”‚   â”œâ”€â”€ results/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ page.tsx              # ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸
â”‚   â”‚   â””â”€â”€ globals.css
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/                   # shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx
â”‚   â”‚   â”‚   â””â”€â”€ RegisterForm.tsx
â”‚   â”‚   â”œâ”€â”€ reading/
â”‚   â”‚   â”‚   â”œâ”€â”€ PassageCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ QuestionCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AnswerOptions.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ResultSummary.tsx
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”œâ”€â”€ StatsCard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ RecentActivity.tsx
â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚       â”œâ”€â”€ Header.tsx
â”‚   â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚       â””â”€â”€ MobileNav.tsx
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts         # ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ server.ts         # ã‚µãƒ¼ãƒãƒ¼ç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ middleware.ts
â”‚   â”‚   â”œâ”€â”€ utils.ts
â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â””â”€â”€ useProgress.ts
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ database.ts           # Supabaseå‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ reading.ts
â”‚   â”‚   â””â”€â”€ user.ts
â”‚   â””â”€â”€ actions/
â”‚       â”œâ”€â”€ auth.ts               # Server Actions
â”‚       â”œâ”€â”€ reading.ts
â”‚       â””â”€â”€ progress.ts
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ migrations/               # DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â””â”€â”€ seed.sql                  # åˆæœŸãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ public/
â”œâ”€â”€ .env.local.example
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ package.json
```

---

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 3.1 ERå›³
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    users     â”‚       â”‚  reading_passages â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚       â”‚ id (PK)          â”‚
â”‚ email        â”‚       â”‚ title            â”‚
â”‚ name         â”‚       â”‚ document_type    â”‚
â”‚ target_score â”‚       â”‚ content          â”‚
â”‚ current_scoreâ”‚       â”‚ difficulty       â”‚
â”‚ created_at   â”‚       â”‚ created_at       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚
       â”‚                        â”‚ 1:N
       â”‚                        â–¼
       â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚               â”‚ reading_questions â”‚
       â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚               â”‚ id (PK)          â”‚
       â”‚               â”‚ passage_id (FK)  â”‚
       â”‚               â”‚ question_text    â”‚
       â”‚               â”‚ question_type    â”‚
       â”‚               â”‚ options (JSONB)  â”‚
       â”‚               â”‚ correct_answer   â”‚
       â”‚               â”‚ explanation      â”‚
       â”‚               â”‚ order_index      â”‚
       â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚
       â”‚ 1:N                    â”‚
       â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            user_answers                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                 â”‚
â”‚ user_id (FK)                            â”‚
â”‚ question_id (FK)                        â”‚
â”‚ selected_answer                         â”‚
â”‚ is_correct                              â”‚
â”‚ time_spent_seconds                      â”‚
â”‚ answered_at                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©

#### usersï¼ˆSupabase Authæ‹¡å¼µï¼‰
```sql
CREATE TABLE public.profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  email TEXT NOT NULL,
  name TEXT,
  target_score INTEGER DEFAULT 900,
  current_score INTEGER,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- RLSï¼ˆRow Level Securityï¼‰
ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own profile"
  ON public.profiles FOR SELECT
  USING (auth.uid() = id);

CREATE POLICY "Users can update own profile"
  ON public.profiles FOR UPDATE
  USING (auth.uid() = id);
```

#### reading_passages
```sql
CREATE TABLE public.reading_passages (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,
  document_type TEXT NOT NULL CHECK (document_type IN (
    'email', 'article', 'notice', 'advertisement',
    'letter', 'chat', 'form', 'review'
  )),
  content TEXT NOT NULL,
  difficulty INTEGER NOT NULL CHECK (difficulty BETWEEN 1 AND 5),
  is_multiple_passage BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_passages_type ON public.reading_passages(document_type);
CREATE INDEX idx_passages_difficulty ON public.reading_passages(difficulty);
```

#### reading_questions
```sql
CREATE TABLE public.reading_questions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  passage_id UUID NOT NULL REFERENCES public.reading_passages(id) ON DELETE CASCADE,
  question_text TEXT NOT NULL,
  question_type TEXT NOT NULL CHECK (question_type IN (
    'main_idea', 'detail', 'inference', 'vocabulary', 'purpose'
  )),
  options JSONB NOT NULL, -- ["é¸æŠè‚¢A", "é¸æŠè‚¢B", "é¸æŠè‚¢C", "é¸æŠè‚¢D"]
  correct_answer INTEGER NOT NULL CHECK (correct_answer BETWEEN 0 AND 3),
  explanation TEXT,
  order_index INTEGER NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_questions_passage ON public.reading_questions(passage_id);
```

#### user_answers
```sql
CREATE TABLE public.user_answers (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES public.profiles(id) ON DELETE CASCADE,
  question_id UUID NOT NULL REFERENCES public.reading_questions(id) ON DELETE CASCADE,
  selected_answer INTEGER NOT NULL CHECK (selected_answer BETWEEN 0 AND 3),
  is_correct BOOLEAN NOT NULL,
  time_spent_seconds INTEGER,
  answered_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),

  -- åŒã˜å•é¡Œã¯1å›ã®ã¿ï¼ˆæœ€æ–°ã®å›ç­”ã‚’ä¿æŒï¼‰
  UNIQUE(user_id, question_id)
);

-- RLS
ALTER TABLE public.user_answers ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own answers"
  ON public.user_answers FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own answers"
  ON public.user_answers FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own answers"
  ON public.user_answers FOR UPDATE
  USING (auth.uid() = user_id);
```

---

## 4. ç”»é¢è¨­è¨ˆ

### 4.1 ç”»é¢é·ç§»å›³
```
[ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°] â”€â”€â†’ [ãƒ­ã‚°ã‚¤ãƒ³] â”€â”€â†’ [ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰]
      â”‚               â”‚                  â”‚
      â”‚               â–¼                  â”œâ”€â”€â†’ [é•·æ–‡å•é¡Œä¸€è¦§]
      â”‚          [ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²]          â”‚         â”‚
      â”‚               â”‚                  â”‚         â–¼
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚    [å•é¡Œè©³ç´°ãƒ»è§£ç­”]
                                         â”‚         â”‚
                                         â”‚         â–¼
                                         â”‚    [çµæœè¡¨ç¤º]
                                         â”‚
                                         â””â”€â”€â†’ [å­¦ç¿’å±¥æ­´]
```

### 4.2 ç”»é¢è©³ç´°

#### 4.2.1 ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] TOEIC Part7 Training    [User] [Logout] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  ã‚ˆã†ã“ãã€{name}ã•ã‚“                           â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç·è§£ç­”æ•°    â”‚ â”‚ æ­£ç­”ç‡      â”‚ â”‚ ç›®æ¨™ã¾ã§  â”‚ â”‚
â”‚  â”‚    42å•     â”‚ â”‚   78%       â”‚ â”‚   12%     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚  [â–¶ é•·æ–‡èª­è§£ã‚’å§‹ã‚ã‚‹]                          â”‚
â”‚                                                 â”‚
â”‚  â”€â”€ æœ€è¿‘ã®å­¦ç¿’ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â”‚ Emailå½¢å¼ â”‚ 5å•ä¸­4å•æ­£è§£ â”‚ 80% â”‚ 1æ™‚é–“å‰   â”‚ â”‚
â”‚  â”‚ Article  â”‚ 4å•ä¸­3å•æ­£è§£ â”‚ 75% â”‚ æ˜¨æ—¥      â”‚ â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2.2 é•·æ–‡å•é¡Œä¸€è¦§
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â†] é•·æ–‡èª­è§£å•é¡Œ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼: [å…¨ã¦â–¼] [é›£æ˜“åº¦â–¼]                 â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“§ Business Email                       â”‚   â”‚
â”‚  â”‚ é›£æ˜“åº¦: â˜…â˜…â˜…â˜†â˜†  å•é¡Œæ•°: 4å•            â”‚   â”‚
â”‚  â”‚ [æœªå›ç­”]                    [é–‹å§‹ â†’]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“° News Article                         â”‚   â”‚
â”‚  â”‚ é›£æ˜“åº¦: â˜…â˜…â˜…â˜…â˜†  å•é¡Œæ•°: 5å•            â”‚   â”‚
â”‚  â”‚ [æ­£ç­”ç‡: 80%]               [å†æŒ‘æˆ¦ â†’]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2.3 å•é¡Œè©³ç´°ãƒ»è§£ç­”ç”»é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â†] Emailå½¢å¼  å•é¡Œ 2/4         [æ®‹ã‚Šæ™‚é–“ 3:24]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ From: John Smith <john@company.com>     â”‚   â”‚
â”‚  â”‚ To: All Staff                           â”‚   â”‚
â”‚  â”‚ Subject: Office Renovation Notice       â”‚   â”‚
â”‚  â”‚                                         â”‚   â”‚
â”‚  â”‚ Dear colleagues,                        â”‚   â”‚
â”‚  â”‚                                         â”‚   â”‚
â”‚  â”‚ I am writing to inform you that...      â”‚   â”‚
â”‚  â”‚ ...                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â”‚  Q. What is the main purpose of this email?    â”‚
â”‚                                                 â”‚
â”‚  â—‹ (A) To announce a new policy               â”‚
â”‚  â— (B) To notify about office changes         â”‚
â”‚  â—‹ (C) To request feedback                    â”‚
â”‚  â—‹ (D) To introduce new staff                 â”‚
â”‚                                                 â”‚
â”‚              [å‰ã¸] [ç¢ºå®šã—ã¦æ¬¡ã¸ â†’]           â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2.4 çµæœç”»é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çµæœ                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚           ğŸ‰ ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼                   â”‚
â”‚                                                 â”‚
â”‚              æ­£ç­”ç‡: 75%                        â”‚
â”‚              (4å•ä¸­ 3å•æ­£è§£)                    â”‚
â”‚                                                 â”‚
â”‚  â”€â”€ å•é¡Œåˆ¥çµæœ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚ Q1 â”‚ âœ“ æ­£è§£  â”‚ main_idea  â”‚ 45ç§’ â”‚        â”‚
â”‚  â”‚ Q2 â”‚ âœ— ä¸æ­£è§£â”‚ detail     â”‚ 62ç§’ â”‚ [è§£èª¬] â”‚
â”‚  â”‚ Q3 â”‚ âœ“ æ­£è§£  â”‚ inference  â”‚ 38ç§’ â”‚        â”‚
â”‚  â”‚ Q4 â”‚ âœ“ æ­£è§£  â”‚ vocabulary â”‚ 29ç§’ â”‚        â”‚
â”‚                                                 â”‚
â”‚        [ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸] [åˆ¥ã®å•é¡Œã‚’è§£ã]     â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. APIè¨­è¨ˆ

### 5.1 Server Actions

#### èªè¨¼é–¢é€£
```typescript
// src/actions/auth.ts
'use server'

// ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
export async function signUp(formData: FormData): Promise<ActionResult>

// ãƒ­ã‚°ã‚¤ãƒ³
export async function signIn(formData: FormData): Promise<ActionResult>

// ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
export async function signOut(): Promise<void>

// ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ›´æ–°
export async function updateProfile(data: ProfileUpdateData): Promise<ActionResult>
```

#### é•·æ–‡èª­è§£é–¢é€£
```typescript
// src/actions/reading.ts
'use server'

// å•é¡Œä¸€è¦§å–å¾—
export async function getPassages(filters?: PassageFilters): Promise<Passage[]>

// å•é¡Œè©³ç´°å–å¾—
export async function getPassageWithQuestions(passageId: string): Promise<PassageWithQuestions>

// å›ç­”ã‚’ä¿å­˜
export async function submitAnswer(data: SubmitAnswerData): Promise<AnswerResult>

// ã‚»ãƒƒãƒˆå®Œäº†ï¼ˆè¤‡æ•°å•é¡Œã®ä¸€æ‹¬ä¿å­˜ï¼‰
export async function completePassage(passageId: string, answers: Answer[]): Promise<PassageResult>
```

#### é€²æ—é–¢é€£
```typescript
// src/actions/progress.ts
'use server'

// ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿å–å¾—
export async function getDashboardStats(): Promise<DashboardStats>

// å­¦ç¿’å±¥æ­´å–å¾—
export async function getRecentActivity(limit?: number): Promise<ActivityItem[]>

// æ­£ç­”ç‡å–å¾—
export async function getAccuracyRate(): Promise<AccuracyData>
```

### 5.2 å‹å®šç¾©
```typescript
// src/types/reading.ts
export interface Passage {
  id: string
  title: string
  documentType: DocumentType
  content: string
  difficulty: number
  isMultiplePassage: boolean
  questionCount: number
  userProgress?: {
    completed: boolean
    accuracy: number
  }
}

export interface Question {
  id: string
  passageId: string
  questionText: string
  questionType: QuestionType
  options: string[]
  orderIndex: number
}

export interface QuestionWithAnswer extends Question {
  correctAnswer: number
  explanation: string | null
}

export type DocumentType =
  | 'email' | 'article' | 'notice' | 'advertisement'
  | 'letter' | 'chat' | 'form' | 'review'

export type QuestionType =
  | 'main_idea' | 'detail' | 'inference' | 'vocabulary' | 'purpose'
```

---

## 6. èªè¨¼ãƒ•ãƒ­ãƒ¼

### 6.1 Supabase Authè¨­å®š
```typescript
// src/lib/supabase/client.ts
import { createBrowserClient } from '@supabase/ssr'

export function createClient() {
  return createBrowserClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  )
}
```

```typescript
// src/lib/supabase/server.ts
import { createServerClient } from '@supabase/ssr'
import { cookies } from 'next/headers'

export async function createClient() {
  const cookieStore = await cookies()

  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        getAll() {
          return cookieStore.getAll()
        },
        setAll(cookiesToSet) {
          cookiesToSet.forEach(({ name, value, options }) => {
            cookieStore.set(name, value, options)
          })
        },
      },
    }
  )
}
```

### 6.2 Middlewareï¼ˆèªè¨¼ãƒã‚§ãƒƒã‚¯ï¼‰
```typescript
// src/middleware.ts
import { createServerClient } from '@supabase/ssr'
import { NextResponse, type NextRequest } from 'next/server'

export async function middleware(request: NextRequest) {
  // èªè¨¼ãŒå¿…è¦ãªãƒ‘ã‚¹
  const protectedPaths = ['/dashboard', '/reading', '/results']
  const isProtectedPath = protectedPaths.some(path =>
    request.nextUrl.pathname.startsWith(path)
  )

  if (!isProtectedPath) {
    return NextResponse.next()
  }

  // ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯
  const supabase = createServerClient(/* ... */)
  const { data: { user } } = await supabase.auth.getUser()

  if (!user) {
    return NextResponse.redirect(new URL('/login', request.url))
  }

  return NextResponse.next()
}

export const config = {
  matcher: ['/((?!_next/static|_next/image|favicon.ico).*)'],
}
```

---

## 7. åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ï¼‰

### 7.1 ã‚µãƒ³ãƒ—ãƒ«é•·æ–‡å•é¡Œ
```sql
-- supabase/seed.sql

-- Emailå½¢å¼ã®ã‚µãƒ³ãƒ—ãƒ«
INSERT INTO public.reading_passages (id, title, document_type, content, difficulty)
VALUES (
  'sample-email-001',
  'Office Renovation Notice',
  'email',
  E'From: facilities@techcorp.com\nTo: All Employees\nSubject: Upcoming Office Renovation\n\nDear Team,\n\nWe are pleased to announce that our office will undergo a major renovation starting next month. The project aims to create a more collaborative and modern workspace.\n\nKey dates:\n- Phase 1 (3rd floor): March 1-15\n- Phase 2 (2nd floor): March 16-31\n\nDuring the renovation, affected departments will be relocated to the temporary workspace on the 5th floor. Please pack your personal belongings by February 28.\n\nIf you have any questions, please contact the Facilities team.\n\nBest regards,\nFacilities Management',
  3
);

INSERT INTO public.reading_questions (passage_id, question_text, question_type, options, correct_answer, explanation, order_index)
VALUES
(
  'sample-email-001',
  'What is the main purpose of this email?',
  'main_idea',
  '["To request employees to work from home", "To announce office renovation plans", "To introduce new team members", "To change company policies"]',
  1,
  'The email clearly states "our office will undergo a major renovation" and provides details about the schedule and relocation plans.',
  1
),
(
  'sample-email-001',
  'When should employees pack their belongings?',
  'detail',
  '["By March 1", "By March 15", "By February 28", "By March 31"]',
  2,
  'The email specifically states "Please pack your personal belongings by February 28."',
  2
);
```

---

## 8. ç’°å¢ƒå¤‰æ•°

```env
# .env.local.example

# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# App
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

---

## 9. é–‹ç™ºã‚¿ã‚¹ã‚¯ä¸€è¦§

### Phase 1-A: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºç›¤ï¼ˆ1æ—¥ç›®ï¼‰
- [ ] Next.js 14ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- [ ] TypeScriptè¨­å®š
- [ ] Tailwind CSS + shadcn/uiå°å…¥
- [ ] Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- [ ] ç’°å¢ƒå¤‰æ•°è¨­å®š
- [ ] åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä½œæˆ

### Phase 1-B: èªè¨¼æ©Ÿèƒ½ï¼ˆ2æ—¥ç›®ï¼‰
- [ ] Supabase Authè¨­å®š
- [ ] ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ç”»é¢
- [ ] èªè¨¼Middleware
- [ ] ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ

### Phase 1-C: é•·æ–‡èª­è§£æ©Ÿèƒ½ï¼ˆ3-4æ—¥ç›®ï¼‰
- [ ] DBãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆï¼ˆpassages, questions, answersï¼‰
- [ ] ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥
- [ ] å•é¡Œä¸€è¦§ç”»é¢
- [ ] å•é¡Œè©³ç´°ãƒ»è§£ç­”ç”»é¢
- [ ] çµæœè¡¨ç¤ºç”»é¢
- [ ] Server Actionså®Ÿè£…

### Phase 1-D: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆ5æ—¥ç›®ï¼‰
- [ ] çµ±è¨ˆãƒ‡ãƒ¼ã‚¿å–å¾—API
- [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢
- [ ] æœ€è¿‘ã®å­¦ç¿’å±¥æ­´è¡¨ç¤º
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œç¢ºèª
- [ ] å‹•ä½œãƒ†ã‚¹ãƒˆãƒ»ä¿®æ­£

---

## 10. æˆåŠŸåŸºæº–

MVPå®Œäº†ã®åˆ¤å®šåŸºæº–ï¼š
1. âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹
2. âœ… é•·æ–‡å•é¡Œã‚’è§£ç­”ã§ãã‚‹
3. âœ… æ­£ç­”ç‡ãŒè¡¨ç¤ºã•ã‚Œã‚‹
4. âœ… ã‚¹ãƒãƒ›ã§ã‚‚å•é¡Œãªãæ“ä½œã§ãã‚‹
5. âœ… 5å•ä»¥ä¸Šã®ã‚µãƒ³ãƒ—ãƒ«å•é¡ŒãŒå­˜åœ¨ã™ã‚‹
