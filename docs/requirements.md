# TOEIC Part7 トレーニングWebサービス - 機能要件定義書

## 概要
TOEIC Part7で90%の正解率を目指す中上級者（600-800点）向けのWebサービス。
文法・単語・長文をバランスよく学習できるトレーニングプラットフォーム。

## 技術スタック
- **フロントエンド**: Next.js 14 (App Router) + TypeScript
- **バックエンド**: Next.js API Routes
- **データベース**: Supabase (PostgreSQL + Auth)
- **AI**: OpenAI GPT-4 API（問題生成）
- **スタイリング**: Tailwind CSS
- **デプロイ**: Vercel

---

## 機能要件

### 1. ユーザー認証機能
| 機能 | 詳細 |
|------|------|
| ユーザー登録 | メールアドレス + パスワードで登録 |
| ログイン/ログアウト | Supabase Authによる認証 |
| パスワードリセット | メールでリセットリンク送信 |
| プロフィール管理 | 目標スコア、現在のスコア、学習開始日の設定 |

### 2. 学習コンテンツ（3つの柱）

#### 2.1 単語学習モジュール
| 機能 | 詳細 |
|------|------|
| TOEIC頻出単語リスト | レベル別（600/700/800/900点レベル） |
| フラッシュカード | 英語→日本語、日本語→英語の両方向 |
| 例文表示 | ビジネスコンテキストでの使用例 |
| AI生成例文 | GPT-4で文脈に合った例文を生成 |
| 単語テスト | 4択問題、スペル入力など |
| 復習リマインダー | 忘却曲線に基づく復習タイミング通知 |

#### 2.2 文法学習モジュール
| 機能 | 詳細 |
|------|------|
| Part5/6形式の文法問題 | 品詞、時制、関係詞、接続詞など |
| カテゴリ別学習 | 弱点分野を集中的に学習可能 |
| 解説表示 | なぜその答えが正しいかの詳細解説 |
| AI生成問題 | GPT-4で類似問題を無限生成 |
| 文法ポイント解説 | 各文法項目のまとめページ |

#### 2.3 長文読解モジュール（Part7対策 - メイン機能）
| 機能 | 詳細 |
|------|------|
| 文書タイプ別練習 | Email、Article、Notice、Chat、複数文書など |
| 設問タイプ別練習 | 主旨把握、詳細理解、推測問題、語彙問題など |
| AI生成長文 | GPT-4でTOEIC形式の長文問題を生成 |
| 段落ごとの解説 | 読解のポイントを段落単位で解説 |
| スキミング練習 | 時間制限付きで要点把握トレーニング |
| スキャニング練習 | 特定情報を素早く見つける訓練 |

### 3. 時間制限機能
| 機能 | 詳細 |
|------|------|
| 問題別タイマー | 各問題に目標解答時間を設定 |
| Part7シミュレーション | 本番と同じ54問/55分の時間配分練習 |
| 経過時間表示 | リアルタイムで残り時間を表示 |
| 時間超過アラート | 目標時間を超えたら通知 |
| 解答時間分析 | 問題タイプ別の平均解答時間を記録 |

### 4. 学習進捗管理
| 機能 | 詳細 |
|------|------|
| ダッシュボード | 学習状況の一覧表示 |
| 正答率グラフ | 日別/週別/月別の正答率推移 |
| カテゴリ別分析 | 単語/文法/長文の分野別正答率 |
| 弱点分析 | 苦手な問題タイプを自動検出 |
| 学習時間記録 | 累計学習時間の記録 |
| 目標達成度 | 90%正解率への進捗を可視化 |
| 予測スコア | 現在の正答率から本番スコアを予測 |

### 5. 復習機能
| 機能 | 詳細 |
|------|------|
| 間違えた問題リスト | 過去に間違えた問題を一覧表示 |
| ブックマーク | 気になる問題を保存 |
| 復習モード | 間違えた問題を優先的に出題 |
| 間隔反復学習 | 忘却曲線に基づいた復習スケジュール |
| 復習テスト | 過去の間違いから自動でテスト作成 |

### 6. 模試機能
| 機能 | 詳細 |
|------|------|
| フルPart7模試 | 本番同様の54問形式 |
| ミニ模試 | 15分/30分の短縮版 |
| 結果分析 | 模試後の詳細な分析レポート |
| 履歴比較 | 過去の模試結果との比較 |

### 7. スマホ対応（レスポンシブ）
| 機能 | 詳細 |
|------|------|
| モバイルファースト設計 | スマホでの操作性を最優先 |
| タッチ操作最適化 | スワイプ、タップで快適操作 |
| オフライン対応 | 一部コンテンツをローカル保存（PWA） |
| プッシュ通知 | 学習リマインダー通知 |

---

## 画面一覧

### 認証系
1. ログイン画面
2. ユーザー登録画面
3. パスワードリセット画面

### メイン機能
4. ダッシュボード（ホーム）
5. 単語学習画面
6. 文法学習画面
7. 長文読解画面
8. 模試画面
9. 復習画面

### 設定・分析
10. 学習進捗・分析画面
11. プロフィール設定画面
12. 通知設定画面

---

## データモデル（主要テーブル）

```
users
├── id, email, name, target_score, current_score, created_at

vocabulary
├── id, word, meaning, level, example_sentence, category

grammar_questions
├── id, question, options[], correct_answer, explanation, category

reading_passages
├── id, document_type, content, difficulty, created_by_ai

reading_questions
├── id, passage_id, question, options[], correct_answer, question_type

user_progress
├── id, user_id, question_id, question_type, is_correct, time_spent, answered_at

bookmarks
├── id, user_id, question_id, question_type, created_at

mock_exam_results
├── id, user_id, total_questions, correct_count, time_spent, created_at
```

---

## 開発フェーズ（優先順位）

### Phase 1: MVP（最小限の機能）
- [ ] プロジェクトセットアップ（Next.js + Supabase）
- [ ] ユーザー認証
- [ ] 基本的な長文読解問題（手動登録）
- [ ] シンプルなダッシュボード

### Phase 2: AI統合
- [ ] GPT-4による問題生成API
- [ ] 長文問題の自動生成
- [ ] 文法問題の自動生成

### Phase 3: 学習管理
- [ ] 学習進捗記録
- [ ] 正答率グラフ
- [ ] 弱点分析

### Phase 4: 復習・時間管理
- [ ] 間違えた問題の復習機能
- [ ] 時間制限機能
- [ ] 間隔反復学習

### Phase 5: 模試・最適化
- [ ] 模試機能
- [ ] PWA対応
- [ ] パフォーマンス最適化

---

## 非機能要件

- **レスポンス時間**: ページ読み込み3秒以内
- **可用性**: 99%以上
- **セキュリティ**: HTTPS、認証トークン管理
- **スケーラビリティ**: Vercel Serverlessで自動スケール
- **アクセシビリティ**: WCAG 2.1 AA準拠を目指す
